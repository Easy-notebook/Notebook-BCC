<steps>
  <step id="data_collection_inventory" title="Data Collection and Inventory">
    <goal>
      Collect and validate the housing dataset to confirm accessibility, completeness, and version traceability. Artifacts: data_existence_report; Acceptance: `os.path.exists("./assets/housing.csv")==True` and `os.path.getsize("./assets/housing.csv")>0`.
    </goal>
    <verified_artifacts>
      <variable name="data_existence_report">Comprehensive record confirming dataset presence, file metadata (size, timestamp), and accessibility path, type: report (JSON/Markdown), quality: must match provided file path and be accessible.</variable>
    </verified_artifacts>
    <required_variables>
      <variable name="user_submit_files">Raw dataset file paths, source: user submission.</variable>
      <variable name="user_problem">Defines project scope and modeling objective, source: global context.</variable>
    </required_variables>
    <pcs_considerations>
      <predictability>Ensures the dataset is consistently sourced and representative of the intended domain for generalizable predictions.</predictability>
      <computability>Standardizes file loading path and encoding for deterministic reproducibility.</computability>
      <stability>Validates dataset integrity to prevent downstream errors or broken references.</stability>
    </pcs_considerations>
  </step>

  <step id="data_structure_discovery" title="Data Structure Discovery">
    <goal>
      Identify the dataset’s schema, variable names, and types to ensure readiness for analysis. Artifacts: data_structure_document; Acceptance: `len(df_raw.columns)>5` and `df_raw.dtypes.notnull().all()==True`.
    </goal>
    <verified_artifacts>
      <variable name="data_structure_document">Schema summary describing each column name, type, and nullability, type: structured document (JSON/CSV), quality: all column names non-null and typed.</variable>
    </verified_artifacts>
    <required_variables>
      <variable name="df_raw">Loaded housing dataset as DataFrame, source: previous step output.</variable>
    </required_variables>
    <pcs_considerations>
      <predictability>Establishes consistent schema understanding to ensure features are consistently interpreted.</predictability>
      <computability>Enforces reproducible schema parsing and deterministic data type inference.</computability>
      <stability>Detects inconsistent or malformed columns that may affect downstream model performance.</stability>
    </pcs_considerations>
  </step>

  <step id="variable_semantic_analysis" title="Variable Semantic Analysis">
    <goal>
      Map variables to semantic meanings and validate against domain understanding. Artifacts: variable_analysis_report; Acceptance: `len(variable_analysis_report['valid_variables'])>5` and `all('price' in variable_analysis_report['target_candidates'])==True`.
    </goal>
    <verified_artifacts>
      <variable name="variable_analysis_report">Detailed mapping of each variable to its semantic meaning, units, and relevance, type: report (DataFrame or JSON), quality: includes target and key predictors.</variable>
    </verified_artifacts>
    <required_variables>
      <variable name="data_structure_document">Schema of the dataset, source: previous step output.</variable>
    </required_variables>
    <pcs_considerations>
      <predictability>Ensures meaningful variables are used, improving interpretability and model generalization.</predictability>
      <computability>Defines structured mapping to facilitate automated feature handling.</computability>
      <stability>Prevents instability from misinterpreted or inconsistent variable definitions.</stability>
    </pcs_considerations>
  </step>

  <step id="variable_relevance_assessment" title="Variable Relevance Assessment">
    <goal>
      Assess statistical relevance of variables to the target to guide feature selection. Artifacts: variable_analysis_report (updated with correlation metrics); Acceptance: `abs(variable_analysis_report['corr_with_target']).mean()>0.1`.
    </goal>
    <verified_artifacts>
      <variable name="variable_analysis_report">Expanded variable analysis report including correlation with target variable, type: numeric summary, quality: all correlations computed successfully.</variable>
    </verified_artifacts>
    <required_variables>
      <variable name="df_raw">Loaded housing dataset as DataFrame, source: data_collection_inventory output.</variable>
      <variable name="variable_analysis_report">Initial variable semantic mapping, source: previous step.</variable>
    </required_variables>
    <pcs_considerations>
      <predictability>Quantifies relationships ensuring variable selection supports robust prediction.</predictability>
      <computability>Uses standardized correlation computation for reproducible analysis.</computability>
      <stability>Evaluates multi-collinearity and ensures variable relationships remain consistent under data perturbation.</stability>
    </pcs_considerations>
  </step>

  <step id="pcs_hypothesis_generation" title="PCS Hypothesis Generation">
    <goal>
      Formulate PCS hypotheses linking data characteristics to predictability, computability, and stability tests. Artifacts: pcs_hypothesis_framework; Acceptance: `len(pcs_hypothesis_framework['hypotheses'])>=3`.
    </goal>
    <verified_artifacts>
      <variable name="pcs_hypothesis_framework">Structured list of PCS hypotheses connecting data factors to predictive outcomes, type: structured text or JSON, quality: covers all three PCS dimensions.</variable>
    </verified_artifacts>
    <required_variables>
      <variable name="variable_analysis_report">Finalized variable-level summary, source: previous step output.</variable>
    </required_variables>
    <pcs_considerations>
      <predictability>Defines testable hypotheses on feature predictability and model generalization.</predictability>
      <computability>Specifies reproducible experimental setups for PCS validation.</computability>
      <stability>Frames robustness tests to verify performance under data and parameter variations.</stability>
    </pcs_considerations>
  </step>

  <focus>
    The execution of this stage should begin with verifying dataset existence and metadata integrity, then proceed to schema discovery and semantic understanding. Variable-level analyses should identify key predictors and correlations before constructing PCS hypotheses to formalize testable expectations for the model’s behavior and stability. Document all intermediate artifacts and ensure each step passes acceptance criteria before progressing.
  </focus>

  <goals>
    Refine the stage goal as: To systematically verify the existence, structure, and semantics of the housing dataset, ensuring traceable, interpretable, and PCS-aligned foundations for predictive modeling.
  </goals>
</steps>