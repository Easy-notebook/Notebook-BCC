<steps>
  <step id="load_and_verify_dataset" title="Load and Verify Housing Dataset">
    <goal>
      Load the raw housing dataset from the submitted file and verify its existence, shape, and column structure. Artifacts: df_raw (pandas DataFrame of housing data), data_existence_report (summary of file validity, rows, columns); Acceptance: `os.path.exists("./assets/housing.csv")==True` and `df_raw.shape[0]>0` and `len(df_raw.columns)>5`.
    </goal>
    <verified_artifacts>
      <variable name="df_raw">Raw DataFrame containing the housing dataset, type: pandas.DataFrame, must be non-empty and structured with at least 6 valid columns.</variable>
      <variable name="data_existence_report">JSON/text report describing file path, file size, number of rows/columns, and missing values summary.</variable>
    </verified_artifacts>
    <required_variables>
      <variable name="user_submit_files">Path to the housing dataset file, from user submission.</variable>
    </required_variables>
    <pcs_considerations>
      <predictability>Ensures consistent and validated data input, reducing variability between runs.</predictability>
      <computability>File loading process uses deterministic encoding and consistent library versions to guarantee reproducibility.</computability>
      <stability>Verifies schema completeness and structure to prevent downstream instability from missing or malformed data.</stability>
    </pcs_considerations>
  </step>

  <step id="analyze_data_structure" title="Analyze Data Structure and Schema">
    <goal>
      Examine the internal structure of df_raw including data types, missing values, and unique identifiers to generate a schema document. Artifacts: data_structure_document (metadata and schema mapping); Acceptance: `len(data_structure_document["columns"])==len(df_raw.columns)` and `all(["dtype" in c for c in data_structure_document["columns"]])`.
    </goal>
    <verified_artifacts>
      <variable name="data_structure_document">Dictionary describing dataset schema: column names, data types, null counts, and inferred primary key, type: dict, must align with df_raw.</variable>
    </verified_artifacts>
    <required_variables>
      <variable name="df_raw">Loaded housing dataset from previous step.</variable>
    </required_variables>
    <pcs_considerations>
      <predictability>Ensures feature consistency and supports reliable variable mapping for modeling.</predictability>
      <computability>Schema captured in reproducible structured format for automated processing.</computability>
      <stability>Prevents silent schema drift and missing variable errors during later computation.</stability>
    </pcs_considerations>
  </step>

  <step id="perform_variable_semantic_analysis" title="Perform Variable Semantic Analysis">
    <goal>
      Conduct semantic analysis of variables to interpret their meaning and assess potential relevance to target price. Artifacts: variable_analysis_report (semantic and correlation summary); Acceptance: `variable_analysis_report["status"]=="completed"` and `len(variable_analysis_report["variables"])>5`.
    </goal>
    <verified_artifacts>
      <variable name="variable_analysis_report">Structured JSON report containing variable-level semantics, type, correlation with target variable, and missing rate summary.</variable>
    </verified_artifacts>
    <required_variables>
      <variable name="df_raw">Loaded housing dataset from prior step.</variable>
      <variable name="data_structure_document">Dataset schema description.</variable>
    </required_variables>
    <pcs_considerations>
      <predictability>Identifies variables with potential predictive power and ensures semantic clarity for modeling.</predictability>
      <computability>Automated variable inspection methods (dtype checks, correlation computation) ensure consistent reproducibility.</computability>
      <stability>Detects noisy or unstable variables that may cause model performance fluctuation.</stability>
    </pcs_considerations>
  </step>

  <step id="establish_observation_unit" title="Establish Observation Unit and Relevance">
    <goal>
      Identify the observation unit (e.g., individual houses) and verify its representativeness and completeness for predictive modeling. Artifacts: observation_unit_report (structure of observation unit, distribution stats); Acceptance: `observation_unit_report["unique_id_ratio"]>0.9` and `observation_unit_report["representative"]==True`.
    </goal>
    <verified_artifacts>
      <variable name="observation_unit_report">JSON report summarizing observation unit definition, unique identifier field, and data representativeness metrics.</variable>
    </verified_artifacts>
    <required_variables>
      <variable name="df_raw">Loaded housing dataset.</variable>
    </required_variables>
    <pcs_considerations>
      <predictability>Ensures each observation represents a valid data unit for generalization.</predictability>
      <computability>Standardizes indexing and observation representation to simplify data manipulation.</computability>
      <stability>Confirms dataset completeness and avoids biases from duplicated or missing identifiers.</stability>
    </pcs_considerations>
  </step>

  <step id="generate_pcs_hypothesis" title="Generate PCS Hypothesis Framework">
    <goal>
      Formulate PCS-aligned hypotheses connecting data characteristics to testable predictability, computability, and stability aspects. Artifacts: pcs_hypothesis_framework (structured hypothesis documentation); Acceptance: `len(pcs_hypothesis_framework["hypotheses"])>=3`.
    </goal>
    <verified_artifacts>
      <variable name="pcs_hypothesis_framework">Document listing testable hypotheses linking data quality and feature relevance to PCS components, type: dict, must contain at least three hypotheses.</variable>
    </verified_artifacts>
    <required_variables>
      <variable name="data_structure_document">Dataset schema description.</variable>
      <variable name="variable_analysis_report">Semantic and correlation analysis report.</variable>
      <variable name="observation_unit_report">Observation unit report.</variable>
    </required_variables>
    <pcs_considerations>
      <predictability>Defines measurable factors that influence model generalization performance.</predictability>
      <computability>Specifies standardized experimental paths for reproducible validation.</computability>
      <stability>Guides robustness assessment and sensitivity evaluation during later experiments.</stability>
    </pcs_considerations>
  </step>

  <focus>
    1. Begin with verifying dataset presence and loading integrity.
    2. Explore structure and metadata systematically to confirm field-level consistency.
    3. Conduct semantic mapping and correlation analysis to align features with target.
    4. Define observation unit to ensure the dataset reflects correct sampling granularity.
    5. Summarize results into a PCS hypothesis document linking observed data characteristics to veridicality standards.
  </focus>

  <goals>
    Reinforce the goal of ensuring verified data existence and readiness by producing reproducible artifacts and PCS-based data understanding reports that establish the foundation for subsequent modeling stages.
  </goals>
</steps>
