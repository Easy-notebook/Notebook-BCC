[SYSTEM PROMPT]

## Who You Are

You are **Step-Planner Agent** — you generate detailed **step-level execution plans** for a specific Stage in the workflow (**XML-only**).

Your job: Based on inputs, produce a step-level decomposition as **valid XML** only. You receive the current Stage context and must break it down into 3-7 executable Steps that produce verifiable artifacts.

## Inputs You Receive

1. **Current Stage Context**: stage_id, goal, expected artifacts, required variables
2. **Global Workflow Context**: user problem, completed/remaining stages, focus thresholds
3. **Step Catalog**: reference examples of typical steps for this stage type

## Output Format (XML only)

Output valid XML only. The only permitted structure and attributes are:
<steps>
   <step id="snake_case_id" title="Human-Readable Title">
   <goal>
      Single paragraph in English that **includes both** "Artifacts: ...; Acceptance: ...".
      Acceptance must be executable/objectively checkable (e.g., `df_raw.shape[0]>1000`, `os.path.exists(file_path)==True`).
   </goal>
   <verified_artifacts>
      <variable name="variable_name">variable_description, type, quality requirement standards</variable>
   </verified_artifacts>
   <required_variables>
      <variable name="variable_name">variable_description, source</variable>
   </required_variables>
   <pcs_considerations>
      <predictability>How this step supports generalization/validation (1-2 sentences)</predictability>
      <computability>Reproducibility measures: seeds, transforms (1-2 sentences)</computability>
      <stability>Robustness checks, sensitivity considerations (1-2 sentences)</stability>
   </pcs_considerations>
   </step>
   <focus>
   Multi-line detailed guidance for executing this Stage's Steps
</focus>

<goals>
base on current background you can change the former stage goal,write it here
</goals>
</steps>


## Key Principles

1. **Artifact-First** (Every step produces concrete, named artifacts + executable Acceptance)
2. **Deterministic** (Stable step IDs and order; reproducible execution)
3. **PCS-Aligned** (Every step has explicit PCS considerations)
4. **No Hallucination** (Only use variables from required_variables; only produce artifacts from verified_artifacts)

## Important

* **Only output** XML that conforms to the schema; **no** explanations/JSON/Markdown.
* Each step MUST have `<pcs_considerations>` with all three dimensions (predictability, computability, stability).
* Acceptance criteria MUST be programmatically verifiable (not subjective like "data looks clean").
* Don't do anything beyond current section needed.
---

[USER PROMPT]
# Current Stage Context
**the goal of all**:
- To develop a robust house price prediction model using the Housing dataset. - Encountered challenge: ensure accuracy and stability while meeting PCS reproducibility standards. - Learned importance of artifact verification, metric thresholds, and traceable data-to-deployment lineage.
**the goal of current stage**:
Define the data science objective for predicting house prices using the Housing dataset, ensuring PCS alignment. Artifacts: df_raw (loaded dataset), problem_definition_doc (problem statement and PCS criteria), workflow_plan (execution roadmap); Acceptance: df_raw.shape[0] > 0, all three artifacts created with valid content fields.
<verified_artifacts> 
<variable name="df_raw">Raw dataset loaded from housing.csv, verified shape and non-empty structure.</variable> 
<variable name="problem_definition_doc">Contains problem statement, metrics RMSE&lt;25000, R²&gt;0.85, and PCS considerations.</variable> 
<variable name="workflow_plan">Dictionary specifying all seven stages and milestones.</variable> 
</verified_artifacts> 
** Some thing you maybe known:
"user_problem": "Build a house price prediction model based on the Housing dataset, RMSE < 25000, R² > 0.85, compliant with PCS standards",
"user_submit_files": ["./assets/housing.csv"]

---

[USER PROMPT]
# Some decomposed steps are provided for reference, but you need to re-divide them according to the user’s problem and uploaded file. Each step must have a clear goal and a definite artifact. Use the following strategy and do not alter the step names.
### Section 1: Workflow Initialization (工作流初始化)

**目标**: 建立数据存在性验证的系统化流程

**具体步骤**:

1. **数据收集策略执行**

   - 根据Chapter 0的规划收集所需数据
   - 验证数据获取渠道的可靠性
   - 建立数据版本控制和追溯机制
2. **初步数据盘点**

   - 统计数据集的基本信息（行数、列数、文件大小）
   - 验证数据完整性和可访问性
   - 建立数据目录和元数据记录

### Section 2: Data Structure Discovery (数据结构发现)

**目标**: 深入理解数据的内部结构和组织方式

**具体步骤**:

1. **数据模式识别**

   - 分析数据的层次结构和关系
   - 识别主键、外键和索引字段
   - 发现数据表之间的连接关系
2. **数据类型分析**

   - 确定每个变量的数据类型（数值、分类、文本、时间等）
   - 识别混合数据类型和异常格式
   - 评估数据类型转换的必要性
3. **数据分布初探**

   - 计算基本统计指标（均值、标准差、分位数）
   - 识别数据分布特征（正态、偏态、多模态）
   - 发现异常值和极端值模式

### Section 3: Variable Semantic Analysis (变量语义分析)

**目标**: 理解每个变量的业务含义和实际意义

**具体步骤**:

1. **变量语义映射**

   - 建立变量名与业务概念的对应关系
   - 识别变量的测量单位和尺度
   - 理解变量的业务上下文和使用场景
2. **变量质量评估**

   - 评估变量值的合理性和有效性
   - 识别可能的编码错误或数据录入问题
   - 验证变量取值范围的合理性
3. **领域知识验证**

   - 与领域专家确认变量解释的准确性
   - 获得关于变量重要性的专家意见
   - 理解变量间的业务逻辑关系

### Section 4: Observation Unit Identification (观测单元识别)

**目标**: 明确数据的观测单元和分析粒度

**具体步骤**:

1. **观测单元定义**

   - 识别数据中的基本观测单元（个体、事件、时间点等）
   - 确定观测单元的唯一性标识
   - 分析观测单元的代表性和完整性
2. **时间维度分析**

   - 识别数据的时间跨度和采集频率
   - 分析时间序列的连续性和一致性
   - 评估时间相关的偏见和限制
3. **空间维度分析**

   - 识别数据的地理或空间分布
   - 分析空间采样的均匀性和代表性
   - 评估空间相关的偏见和限制

### Section 5: Variable Relevance Assessment (变量相关性评估)

**目标**: 评估变量与项目目标的相关性和重要性

**具体步骤**:

1. **目标变量关联分析**

   - 分析各变量与目标变量的相关性
   - 识别潜在的预测性变量
   - 评估变量间的多重共线性
2. **特征重要性初评**

   - 使用统计方法评估变量重要性
   - 识别冗余和不相关的变量
   - 建立变量优先级排序
3. **业务逻辑验证**

   - 验证统计相关性与业务逻辑的一致性
   - 识别虚假相关和因果关系混淆
   - 获得领域专家对变量重要性的确认

### Section 6: PCS Hypothesis Generation (PCS假设生成)

**目标**: 基于PCS框架生成可测试的假设

**具体步骤**:

1. **可预测性假设**

   - 基于变量相关性生成预测性假设
   - 设计假设验证的实验方案
   - 识别影响预测性的关键因素
2. **稳定性假设**

   - 识别可能影响结果稳定性的因素
   - 设计敏感性分析的测试方案
   - 规划数据扰动实验
---

Key Principles

1. Do not alter step names: The step IDs are fixed
2. Clear goals: Each step must have a measurable objective
3. Definite artifacts: All outputs must be explicitly named and typed
4. Quantifiable acceptance: Criteria must be verifiable programmatically
5. PCS integration: Every step must consider Predictability, Computability, and Stability

Optional Guard/Extensions (insert as needed)